(function(){"use strict";function i(t,n){for(var r=0,e=t.length;r<e;r++)if(t[r]===n)return r;return-1}function u(t){var n=t._promiseCallbacks;return n||(n=t._promiseCallbacks={}),n}function t(t,n){if("onerror"!==t)return 2!==arguments.length?vt[t]:void(vt[t]=n);vt.on("error",n)}function r(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return"function"==typeof t}function e(t){return"object"==typeof t&&null!==t}function n(){}function o(){setTimeout(function(){for(var t,n=0;n<bt.length;n++){var r=(t=bt[n]).payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),vt.trigger(t.name,t.payload)}bt.length=0},50)}function s(t,n,r){1===bt.push({name:t,payload:{key:n._guidKey,id:n._id,eventName:t,detail:n._result,childId:r&&r._id,label:n._label,timeStamp:wt(),error:vt["instrument-with-stack"]?new Error(n._label):null}})&&o()}function f(){return new TypeError("A promises callback cannot return that same promise.")}function l(){}function a(t){try{return t.then}catch(n){return kt.error=n,kt}}function h(t,n,r,e){try{t.call(n,r,e)}catch(o){return o}}function p(t,e,o){vt.async(function(n){var r=!1,t=h(o,e,function(t){r||(r=!0,e!==t?y(n,t):m(n,t))},function(t){r||(r=!0,w(n,t))},"Settle: "+(n._label||" unknown promise"));!r&&t&&(r=!0,w(n,t))},t)}function d(n,r){r._state===jt?m(n,r._result):r._state===Tt?(r._onError=null,w(n,r._result)):g(r,undefined,function(t){r!==t?y(n,t):m(n,t)},function(t){w(n,t)})}function _(t,n){if(n.constructor===t.constructor)d(t,n);else{var r=a(n);r===kt?w(t,kt.error):r===undefined?m(t,n):c(r)?p(t,n,r):m(t,n)}}function y(t,n){t===n?m(t,n):r(n)?_(t,n):m(t,n)}function v(t){t._onError&&t._onError(t._result),b(t)}function m(t,n){t._state===At&&(t._result=n,t._state=jt,0===t._subscribers.length?vt.instrument&&Et("fulfilled",t):vt.async(b,t))}function w(t,n){t._state===At&&(t._state=Tt,t._result=n,vt.async(v,t))}function g(t,n,r,e){var o=t._subscribers,i=o.length;t._onError=null,o[i]=n,o[i+jt]=r,o[i+Tt]=e,0===i&&t._state&&vt.async(b,t)}function b(t){var n=t._subscribers,r=t._state;if(vt.instrument&&Et(r===jt?"fulfilled":"rejected",t),0!==n.length){for(var e,o,i=t._result,u=0;u<n.length;u+=3)e=n[u],o=n[u+r],e?j(r,e,o,i):o(i);t._subscribers.length=0}}function E(){this.error=null}function A(t,n){try{return t(n)}catch(r){return St.error=r,St}}function j(t,n,r,e){var o,i,u,s,a=c(r);if(a){if((o=A(r,e))===St?(s=!0,i=o.error,o=null):u=!0,n===o)return void w(n,f())}else o=e,u=!0;n._state!==At||(a&&u?y(n,o):s?w(n,i):t===jt?m(n,o):t===Tt&&w(n,o))}function T(n,t){var r=!1;try{t(function e(t){r||(r=!0,y(n,t))},function o(t){r||(r=!0,w(n,t))})}catch(i){w(n,i)}}function k(t,n,r){return t===jt?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function S(t,n,r,e){this._instanceConstructor=t,this.promise=new t(l,e),this._abortOnReject=r,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&m(this.promise,this._result))):w(this.promise,this._validationError())}function C(t,n){return new Ct(this,t,!0,n).promise}function O(t,n){function r(t){y(i,t)}function e(t){w(i,t)}var o=this,i=new o(l,n);if(!mt(t))return w(i,new TypeError("You must pass an array to race.")),i;for(var u=t.length,s=0;i._state===At&&s<u;s++)g(o.resolve(t[s]),undefined,r,e);return i}function I(t,n){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var e=new r(l,n);return y(e,t),e}function R(t,n){var r=new this(l,n);return w(r,t),r}function x(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(t,n){this._id=Nt++,this._label=n,this._state=undefined,this._result=undefined,this._subscribers=[],vt.instrument&&Et("created",this),l!==t&&(c(t)||x(),this instanceof N||M(),T(this,t))}function P(){this.value=undefined}function Y(t){try{return t.then}catch(n){return Yt.value=n,Yt}}function D(t,n,r){try{t.apply(n,r)}catch(e){return Yt.value=e,Yt}}function K(t,n){for(var r,e={},o=t.length,i=new Array(o),u=0;u<o;u++)i[u]=t[u];for(r=0;r<n.length;r++)e[n[r]]=i[r+1];return e}function U(t){for(var n=t.length,r=new Array(n-1),e=1;e<n;e++)r[e-1]=t[e];return r}function q(r,e){return{then:function(t,n){return r.call(e,t,n)}}}function F(a,c){var t=function(){for(var t,n=this,r=arguments.length,e=new Array(r+1),o=!1,i=0;i<r;++i){if(t=arguments[i],!o){if((o=V(t))===Dt){var u=new Pt(l);return w(u,Dt.value),u}o&&!0!==o&&(t=q(o,t))}e[i]=t}var s=new Pt(l);return e[r]=function(t,n){t?w(s,t):c===undefined?y(s,n):!0===c?y(s,U(arguments)):mt(c)?y(s,K(arguments,c)):y(s,n)},o?L(s,e,a,n):G(s,e,a,n)};return t.__proto__=a,t}function G(t,n,r,e){var o=D(r,e,n);return o===Yt&&w(t,o.value),t}function L(r,t,e,o){return Pt.all(t).then(function(t){var n=D(e,o,t);return n===Yt&&w(r,n.value),r})}function V(t){return!(!t||"object"!=typeof t)&&(t.constructor===Pt||Y(t))}function W(t,n){return Pt.all(t,n)}function $(t,n,r){this._superConstructor(t,n,!1,r)}function z(t,n){return new $(Pt,t,n).promise}function B(t,n){return Pt.race(t,n)}function H(t,n,r){this._superConstructor(t,n,!0,r)}function J(t,n){return new Gt(Pt,t,n).promise}function Q(t,n,r){this._superConstructor(t,n,!1,r)}function X(t,n){return new Q(Pt,t,n).promise}function Z(t){throw setTimeout(function(){throw t}),t}function tt(t){var r={};return r.promise=new Pt(function(t,n){r.resolve=t,r.reject=n},t),r}function nt(t,o,i){return Pt.all(t,i).then(function(t){if(!c(o))throw new TypeError("You must pass a function as map's second argument.");for(var n=t.length,r=new Array(n),e=0;e<n;e++)r[e]=o(t[e]);return Pt.all(r,i)})}function rt(t,n){return Pt.resolve(t,n)}function et(t,n){return Pt.reject(t,n)}function ot(t,r,e){return Pt.all(t,e).then(function(o){if(!c(r))throw new TypeError("You must pass a function as filter's second argument.");for(var i=o.length,t=new Array(i),n=0;n<i;n++)t[n]=r(o[n]);return Pt.all(t,e).then(function(t){for(var n=new Array(i),r=0,e=0;e<i;e++)t[e]&&(n[r]=o[e],r++);return n.length=r,n})})}function it(t,n){un[Xt]=t,un[Xt+1]=n,2===(Xt+=2)&&Vt()}function ut(){var t=process.nextTick,n=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(t=setImmediate),function(){t(lt)}}function st(){return function(){vertxNext(lt)}}function at(){var t=0,n=new rn(lt),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function ct(){var t=new MessageChannel;return t.port1.onmessage=lt,function(){t.port2.postMessage(0)}}function ft(){return function(){setTimeout(lt,1)}}function lt(){for(var t=0;t<Xt;t+=2){(0,un[t])(un[t+1]),un[t]=undefined,un[t+1]=undefined}Xt=0}function ht(){try{var t=require("vertx");t.runOnLoop||t.runOnContext;return st()}catch(n){return ft()}}function pt(t,n){vt.async(t,n)}function dt(){vt.on.apply(vt,arguments)}function _t(){vt.off.apply(vt,arguments)}var yt={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=undefined,t},on:function(t,n){var r,e=u(this);(r=e[t])||(r=e[t]=[]),-1===i(r,n)&&r.push(n)},off:function(t,n){var r,e,o=u(this);n?-1!==(e=i(r=o[t],n))&&r.splice(e,1):o[t]=[]},trigger:function(t,n){var r;if(r=u(this)[t])for(var e=0;e<r.length;e++)(0,r[e])(n)}},vt={instrument:!1};yt.mixin(vt);var mt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},wt=Date.now||function(){return(new Date).getTime()},gt=Object.create||function(t){if(1<arguments.length)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return n.prototype=t,new n},bt=[],Et=s,At=void 0,jt=1,Tt=2,kt=new E,St=new E,Ct=S;S.prototype._validateInput=function(t){return mt(t)},S.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},S.prototype._init=function(){this._result=new Array(this.length)},S.prototype._enumerate=function(){for(var t=this.length,n=this.promise,r=this._input,e=0;n._state===At&&e<t;e++)this._eachEntry(r[e],e)},S.prototype._eachEntry=function(t,n){var r=this._instanceConstructor;e(t)?t.constructor===r&&t._state!==At?(t._onError=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(r.resolve(t),n):(this._remaining--,this._result[n]=this._makeResult(jt,n,t))},S.prototype._settledAt=function(t,n,r){var e=this.promise;e._state===At&&(this._remaining--,this._abortOnReject&&t===Tt?w(e,r):this._result[n]=this._makeResult(t,n,r)),0===this._remaining&&m(e,this._result)},S.prototype._makeResult=function(t,n,r){return r},S.prototype._willSettleAt=function(t,n){var r=this;g(t,undefined,function(t){r._settledAt(jt,n,t)},function(t){r._settledAt(Tt,n,t)})};var Ot=C,It=O,Rt=I,xt=R,Mt="rsvp_"+wt()+"-",Nt=0,Pt=N;N.cast=Rt,N.all=Ot,N.race=It,N.resolve=Rt,N.reject=xt,N.prototype={constructor:N,_guidKey:Mt,_onError:function(n){vt.async(function(t){setTimeout(function(){t._onError&&vt.trigger("error",n)},0)},this)},then:function(t,n,r){var e=this,o=e._state;if(o===jt&&!t||o===Tt&&!n)return vt.instrument&&Et("chained",this,this),this;e._onError=null;var i=new this.constructor(l,r),u=e._result;if(vt.instrument&&Et("chained",e,i),o){var s=arguments[o-1];vt.async(function(){j(o,i,s,u)})}else g(e,i,t,n);return i},"catch":function(t,n){return this.then(null,t,n)},"finally":function(n,t){var r=this.constructor;return this.then(function(t){return r.resolve(n()).then(function(){return t})},function(t){return r.resolve(n()).then(function(){throw t})},t)}};var Yt=new P,Dt=new P,Kt=F,Ut=W;$.prototype=gt(Ct.prototype),$.prototype._superConstructor=Ct,$.prototype._makeResult=k,$.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var qt=z,Ft=B,Gt=H;H.prototype=gt(Ct.prototype),H.prototype._superConstructor=Ct,H.prototype._init=function(){this._result={}},H.prototype._validateInput=function(t){return t&&"object"==typeof t},H.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},H.prototype._enumerate=function(){var t=this.promise,n=this._input,r=[];for(var e in n)t._state===At&&n.hasOwnProperty(e)&&r.push({position:e,entry:n[e]});var o,i=r.length;this._remaining=i;for(var u=0;t._state===At&&u<i;u++)o=r[u],this._eachEntry(o.entry,o.position)};var Lt=J;Q.prototype=gt(Gt.prototype),Q.prototype._superConstructor=Ct,Q.prototype._makeResult=k,Q.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var Vt,Wt=X,$t=Z,zt=tt,Bt=nt,Ht=rt,Jt=et,Qt=ot,Xt=0,Zt=it,tn="undefined"!=typeof window?window:undefined,nn=tn||{},rn=nn.MutationObserver||nn.WebKitMutationObserver,en="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),on="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,un=new Array(1e3);Vt=en?ut():rn?at():on?ct():tn===undefined&&"function"==typeof require?ht():ft(),vt.async=Zt;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var sn=window.__PROMISE_INSTRUMENTATION__;for(var an in t("instrument",!0),sn)sn.hasOwnProperty(an)&&dt(an,sn[an])}var cn={race:Ft,Promise:Pt,allSettled:qt,hash:Lt,hashSettled:Wt,denodeify:Kt,on:dt,off:_t,map:Bt,filter:Qt,resolve:Ht,reject:Jt,all:Ut,rethrow:$t,defer:zt,EventTarget:yt,configure:t,async:pt};"function"==typeof define&&define.amd?define(function(){return cn}):"undefined"!=typeof module&&module.exports?module.exports=cn:void 0!==this&&(this.RSVP=cn)}).call(this);