define("utilities",[],function(){"use strict";return{currencyToInteger:function(e){return parseInt(e.replace(/[\xa3,]/g,""),10)},numberToCurrency:function(e){var n="\\d(?=(\\d{3})+$)";return"\xa3"+Math.round(e).toFixed(0).replace(new RegExp(n,"g"),"$&,")},convertCamelCaseToDashed:function(e){return 2<e.length&&(e=e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2")),e.toLowerCase()},log:function(e,n){n=n||"log",this.doesConsoleExist(n)&&window.console[n](e)},doesConsoleExist:function(e){return"undefined"!=typeof window.console&&"undefined"!=typeof window.console[e]},debounce:function(o,i){var s;return function(){var e=this,n=arguments,t=function(){s=null,o.apply(e,n)};clearTimeout(s),s=setTimeout(t,i)}},throttle:function(o,i,s){var r,a;return i||(i=250),function(){var e=s||this,n=+new Date,t=arguments;r&&n<r+i?(window.clearTimeout(a),a=window.setTimeout(function(){r=n,o.apply(e,t)},i)):(r=n,o.apply(e,t))}}}}),define(["jquery","rsvp","utilities"],function(a,c,i,u){"use strict";return{components:{},init:function(e,n){var t,o,i,s,r=this;return this.components={},e=e||a("body"),t=this._listComponentsToCreate(e,n||!1),o=this._createPromises(t),i=this._createPromises(t),t.length&&(this._instantiateComponents(t,o.deferreds),c.allSettled(o.promises).then(function(e){r._checkForFailedInstantiations(e,i.deferreds),r._initialiseComponents(r.components,i.deferreds)})),(s=c.allSettled(i.promises)).then(function(){a("body").attr("data-dough-component-loader-all-loaded","yes"),e.trigger(u.EventConstants.ComponentsComplete)}),s},_checkForFailedInstantiations:function(e,t){a.each(e,function(e,n){"rejected"===n.state&&"SINGLETON-DUPLICATE"===n.reason.description&&(t[e].resolve(),t.splice(e,1))})},_listComponentsToCreate:function(e,n){var t,o,i=[],s="[data-dough-component]";return n||(s+=":not([data-dough-defer])"),(e.is(s)?e:e.find(s)).each(function(){t=a(this),o=t.attr("data-dough-component").split(" "),a.each(o,function(e,n){t.is("[data-dough-"+n+'-initialised="yes"]')||i.push({$el:t,componentName:n})})}),i},_createPromises:function(e){var n={deferreds:[],promises:[]};return a.each(e,function(e){n.deferreds.push(c.defer()),n.promises.push(n.deferreds[e].promise)}),n},_instantiateComponents:function(e,t){var o=this;a.each(e,function(e,n){o._instantiateComponent(n.componentName,n.$el,t[e])})},_instantiateComponent:function(n,t,o){var i=this,s=this._parseConfig(t,n);require([n],function(e){e.isSingleton&&i.components[n]?o.reject({componentName:n,description:"SINGLETON-DUPLICATE"}):(i.components[n]||(i.components[n]=[]),i.components[n].push(new e(t,s)),o.resolve())})},_initialiseComponents:function(e,o){var i=0;a.each(e,function(e,n){a.each(n,function(e,n){try{n.init&&n.init(o[i])}catch(t){0<=document.location.hostname.indexOf("localhost")&&console.log(t),o[i].reject(t)}i++})})},_parseConfig:function(e,n){var t=e.attr("data-dough-"+i.convertCamelCaseToDashed(n)+"-config");try{t=JSON.parse(t)}catch(o){t={}}return t}}});